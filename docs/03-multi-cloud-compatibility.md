# Multi-Cloud Compatibility Policy (Non-Negotiable)

## Purpose
Ensure canonical definitions remain valid across:
Azure, GCP, AWS, OnPrem, and mixed deployments.

## Canonical vs Physical
- Canonical: defined once in MetaDB; cloud-agnostic.
- Physical: per-platform projection generated by adapters.

Canonical definitions NEVER change for platform reasons.

## Physical naming is adapter-driven
MetaDB must store for each canonical object and platform:
- PhysicalContainer (workspace/project/db)
- PhysicalSchema (dataset/schema)
- PhysicalName (object/table)
- ConstraintsApplied (lowercase, truncation)
- Role (Primary/Secondary/DR)

## Single canonical object compiled side-by-side

Canonical Target:
`SFO-ProdA-Fabric-BI-USW`
(Client=SFO, Env=ProdA, Platform=Fabric, Domain=BI, Region=USW)

### Azure (Fabric)
- Workspace: `BI-ProdA`
- Lakehouse: `bi_proda_usw`
- Warehouse: `bi_proda_wh`
- Table (example): `factsalesactual`

### GCP (BigQuery)
- Project: `sfo-prod`
- Dataset: `bi_proda_usw`
- Table: `factsalesactual`

### AWS (Redshift)
- Database: `sfo_bi`
- Schema: `bi_proda`
- Table: `factsalesactual`

Rule: These are projections of the same canonical target and must be resolvable back to canonical via MetaDB reverse mapping.

## Multi-cloud redundancy
MetaDB must support multiple platforms for same canonical target:
- Role: Primary / Secondary / DR
- FailoverOrder
- Active flags per platform

## Migration litmus test
If a cloud vendor disappears tomorrow:
- Canonical definitions remain valid
- Only adapters and physical projections change
